{"version":3,"file":"static/js/544.1d41baf2.chunk.js","mappings":"4NAKA,MAgJA,EAhJ0BA,IAExB,MAAMC,GAAUC,EAAAA,EAAAA,UAEVC,GAASD,EAAAA,EAAAA,UAETE,GAAQF,EAAAA,EAAAA,QAAO,MAEfG,GAAOH,EAAAA,EAAAA,QAAO,OAGbI,EAAkBC,IAAuBC,EAAAA,EAAAA,WAAS,GAEnDC,EAAgBC,IACpB,MAAM,KAAEC,EAAI,MAAEC,GAAUF,EAAMG,OAC9B,OAAQF,GACN,IAAK,QACHP,EAAMU,QAAUF,EAChB,MACF,IAAK,OACHP,EAAKS,QAAUF,EACf,MACF,QACE,OACJ,EAkEF,OACEG,EAAAA,EAAAA,KAAA,OAAKC,UAAU,mBAAkBC,SAC7BX,GAqCAY,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,qBACJC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,SAAa,KAACF,EAAAA,EAAAA,KAAA,MAAAE,SAAKjB,EAAMmB,WAEnCD,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,SAAa,KAACF,EAAAA,EAAAA,KAAA,MAAAE,SAAKb,EAAMU,aAElCT,EAAKS,SAAUI,EAAAA,EAAAA,MAAA,MAAAD,SAAA,CAAI,SAAOZ,EAAKS,WAAgB,SA5ClDI,EAAAA,EAAAA,MAAA,QAAME,SAlBQV,IAElB,GADAA,EAAMW,kBACDjB,EAAMU,QAGT,OAFAQ,MAAM,gCACNrB,EAAQa,QAAQS,QAKlBC,QAAQC,IACL,QAAOrB,EAAMU,mBAAmBd,EAAMmB,eAAed,EAAKS,WAE7DP,GAAoB,EAAK,EAMMU,SAAA,EACzBF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,mBACJC,EAAAA,EAAAA,MAAA,SAAAD,SAAA,CAAO,SAELF,EAAAA,EAAAA,KAAA,UACAA,EAAAA,EAAAA,KAAA,SACEW,KAAK,OACLC,SAAUlB,EACVE,KAAK,QACLiB,IAAK3B,EACL4B,UAAQ,QAGZd,EAAAA,EAAAA,KAAA,UAGAG,EAAAA,EAAAA,MAAA,SAAAD,SAAA,CAAO,eAELF,EAAAA,EAAAA,KAAA,UACAA,EAAAA,EAAAA,KAAA,YACEY,SAAUlB,EACVqB,KAAM,GACNnB,KAAK,OACLoB,KAAM,EACNH,IAAKzB,QAGTY,EAAAA,EAAAA,KAAA,UACAA,EAAAA,EAAAA,KAAA,UAAQC,UAAU,aAAaU,KAAK,SAASM,QAtExCC,UAEX,MAAMC,EAAQlC,EAAMmC,IAEdC,QAAaC,EAAAA,KAAaC,IAAI,CAClCC,QAAU,UAASvC,EAAMwC,iBAAkBC,IAAI,YAG3CC,QAA2BL,EAAAA,KAAaM,cAAc,CAC1DC,uBAAwBR,EAAKS,oBAC7BC,OAAQZ,EACRO,IAAI,kBAGAJ,EAAAA,KAAaU,KAAK,CACtBC,eAAiB,kCAAiChD,EAAMmB,cAAcf,EAAMU,wBAAwBT,EAAKS,UACzGmC,YAAa,OACbC,gBAAkB,UAASlD,EAAMmD,KACjCL,OAAQZ,EACRkB,cAAeV,EACfD,IAAK,WACL,EAiD+DxB,SAAC,cAG5DF,EAAAA,EAAAA,KAAA,UAAQC,UAAU,aAAagB,QAAShC,EAAMqD,KAAKpC,SAAC,aAgBpD,C","sources":["component/confirmationForm.js"],"sourcesContent":["import { useRef, useState } from \"react\";\r\n\r\nimport * as PushAPI from \"@pushprotocol/restapi\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\n\r\nconst ConfirmationForm = (props) => {\r\n\r\n  const nameRef = useRef();\r\n\r\n  const desRef = useRef();\r\n\r\n  const nameN = useRef(null);\r\n  \r\n  const desc = useRef(null);\r\n \r\n\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n  const handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n    switch (name) {\r\n      case \"nameN\":\r\n        nameN.current = value;\r\n        break;\r\n      case \"desc\":\r\n        desc.current = value;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n  };\r\n\r\n\r\n  \r\n// async function onc(){\r\n//   const _signer= props.sig;\r\n//   const user = await PushAPI.user.get({\r\n//     account: `eip155:${props.currentAccount}`, env:'staging'});\r\n//  console.log(_signer)\r\n//  console.log(user)\r\n//  const pgpDecryptedPvtKey = await PushAPI.chat.decryptPGPKey({\r\n//   encryptedPGPPrivateKey: user.encryptedPrivateKey,\r\n//   signer: _signer,\r\n//   env:'staging'\r\n// });\r\n\r\n// const result=await PushAPI.chat.send({\r\n//   messageContent: \"Gm gm! It's me... Mario\",\r\n//   messageType: \"Text\", // can be \"Text\" | \"Image\" | \"File\" | \"GIF\"\r\n//   receiverAddress: `eip155:${id}`,\r\n//   signer: _signer,\r\n//   pgpPrivateKey: pgpDecryptedPvtKey,\r\n//   env: \"staging\",\r\n// });\r\n// console.log(\"result\",result)\r\n// }\r\n  const Chat = async () => {\r\n    \r\n    const _signer=props.sig;\r\n    \r\n    const user = await PushAPI.user.get({\r\n      account: `eip155:${props.currentAccount}`, env:'staging'});\r\n\r\n    // need to decrypt the encryptedPvtKey to pass in the api using helper function\r\n    const pgpDecryptedPvtKey = await PushAPI.chat.decryptPGPKey({\r\n      encryptedPGPPrivateKey: user.encryptedPrivateKey,\r\n      signer: _signer,\r\n      env:'staging'\r\n    });\r\n    \r\n    await PushAPI.chat.send({\r\n      messageContent: `Request to schedule meet\\nTime:${props.date}\\nName:${nameN.current}\\nDescription:${desc.current}`,\r\n      messageType: \"Text\", // can be \"Text\" | \"Image\" | \"File\" | \"GIF\"\r\n      receiverAddress: `eip155:${props.id}`,\r\n      signer: _signer,\r\n      pgpPrivateKey: pgpDecryptedPvtKey,\r\n      env: \"staging\",\r\n    });\r\n  };\r\n\r\n  const formSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (!nameN.current) {\r\n      alert(\"Name field is manfatory\");\r\n      nameRef.current.focus();\r\n      return;\r\n    }\r\n\r\n\r\n    console.log(\r\n      `name:${nameN.current} \\n date:${props.date}\\n desc:${desc.current}`\r\n    );\r\n    setShowConfirmation(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"confirmationBody\">\r\n      {!showConfirmation ? (\r\n        <form onSubmit={formSubmit}>\r\n          <h2>Enter details</h2>\r\n          <label>\r\n            Name*\r\n            <br />\r\n            <input\r\n              type=\"text\"\r\n              onChange={handleChange}\r\n              name=\"nameN\"\r\n              ref={nameRef}\r\n              required\r\n            />\r\n          </label>\r\n          <br />\r\n          \r\n         \r\n          <label>\r\n            Description\r\n            <br />\r\n            <textarea\r\n              onChange={handleChange}\r\n              cols={40}\r\n              name=\"desc\"\r\n              rows={5}\r\n              ref={desRef}\r\n            />\r\n          </label>\r\n          <br />\r\n          <button className=\"formButton\" type=\"submit\" onClick={Chat}>\r\n            Schedule\r\n          </button>\r\n          <button className=\"formButton\" onClick={props.back}>\r\n            Back\r\n          </button>\r\n        </form>\r\n      ) : (\r\n        <div className=\"BookingDetail\">\r\n          <h3>Booking Details</h3>\r\n          <h4>\r\n            <strong>date</strong>:<em>{props.date}</em>\r\n          </h4>\r\n          <h4>\r\n            <strong>name</strong>:<em>{nameN.current}</em>\r\n          </h4>\r\n          {desc.current ? <h4>desc: {desc.current}</h4> : null}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfirmationForm;\r\n"],"names":["props","nameRef","useRef","desRef","nameN","desc","showConfirmation","setShowConfirmation","useState","handleChange","event","name","value","target","current","_jsx","className","children","_jsxs","date","onSubmit","preventDefault","alert","focus","console","log","type","onChange","ref","required","cols","rows","onClick","async","_signer","sig","user","PushAPI","get","account","currentAccount","env","pgpDecryptedPvtKey","decryptPGPKey","encryptedPGPPrivateKey","encryptedPrivateKey","signer","send","messageContent","messageType","receiverAddress","id","pgpPrivateKey","back"],"sourceRoot":""}